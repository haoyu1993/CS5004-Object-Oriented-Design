{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport MovieDataService from '../services/movies';\nimport { Link } from 'react-router-dom';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport Container from 'react-bootstrap/Container';\nimport Card from 'react-bootstrap/Card';\nimport './MoviesList.css';\nconst MoviesList = props => {\n  _s();\n  const [movies, setMovies] = useState([]);\n  const [searchTitle, setSearchTitle] = useState(\"\");\n  const [searchRating, setSearchRating] = useState(\"\");\n  const [ratings, setRatings] = useState([\"All Ratings\"]);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [entriesPerPage, setEntriesPerPage] = useState(0);\n  const [currentSearchMode, setCurrentSearchMode] = useState(\"\");\n  const retrieveRatings = useCallback(() => {\n    MovieDataService.getRatings().then(response => {\n      setRatings([\"All Ratings\"].concat(response.data));\n    }).catch(error => {\n      console.log(error);\n    });\n  }, []);\n\n  // Make sure to add the dependencies array as the second argument to useCallback\n\n  const retrieveMovies = useCallback(() => {\n    setCurrentSearchMode(\"\");\n    MovieDataService.getAll(currentPage).then(response => {\n      setMovies(response.data.movies);\n      setCurrentPage(response.data.page);\n      setEntriesPerPage(response.data.entries_per_page);\n    }).catch(error => {\n      console.log(error);\n    });\n  }, [currentPage]);\n\n  // Make sure to add the dependencies array as the second argument to useCallback\n  const find = useCallback((query, by) => {\n    MovieDataService.find(query, by, currentPage).then(response => {\n      setMovies(response.data.movies);\n    }).catch(error => {\n      console.log(error);\n    });\n  }, [currentPage]);\n  const findByTitle = useCallback(() => {\n    setCurrentSearchMode(\"findByTitle\");\n    find(searchTitle, \"title\");\n  }, [find, searchTitle]);\n  const findByRating = useCallback(() => {\n    setCurrentSearchMode(\"findByRating\");\n    if (searchRating === \"All Ratings\") {\n      retrieveMovies();\n    } else {\n      find(searchRating, \"rated\");\n    }\n  }, [find, retrieveMovies, searchRating]);\n  const retrieveNextPage = useCallback(() => {\n    if (currentSearchMode === \"findByTitle\") {\n      findByTitle();\n    } else if (currentSearchMode === \"findByRating\") {\n      findByRating();\n    } else {\n      retrieveMovies();\n    }\n  }, [currentSearchMode, findByTitle, findByRating, retrieveMovies]);\n\n  // Use effect to carry out side effect functionality\n  useEffect(() => {\n    retrieveRatings();\n  }, [retrieveRatings]);\n  useEffect(() => {\n    setCurrentPage(0);\n  }, [currentSearchMode]);\n\n  // Retrieve the next page if currentPage value changes\n  useEffect(() => {\n    retrieveNextPage();\n  }, [currentPage, retrieveNextPage]);\n\n  // Other functions that are not depended on by useEffect\n  const onChangeSearchTitle = e => {\n    const searchTitle = e.target.value;\n    setSearchTitle(searchTitle);\n  };\n  const onChangeSearchRating = e => {\n    const searchRating = e.target.value;\n    setSearchRating(searchRating);\n  };\n};\n_s(MoviesList, \"c1sozDwetlv6XPxfoXMp3Q+8eWg=\");\n_c = MoviesList;\nexport default MoviesList;\nvar _c;\n$RefreshReg$(_c, \"MoviesList\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","MovieDataService","Link","Form","Button","Col","Row","Container","Card","MoviesList","props","_s","movies","setMovies","searchTitle","setSearchTitle","searchRating","setSearchRating","ratings","setRatings","currentPage","setCurrentPage","entriesPerPage","setEntriesPerPage","currentSearchMode","setCurrentSearchMode","retrieveRatings","getRatings","then","response","concat","data","catch","error","console","log","retrieveMovies","getAll","page","entries_per_page","find","query","by","findByTitle","findByRating","retrieveNextPage","onChangeSearchTitle","e","target","value","onChangeSearchRating","_c","$RefreshReg$"],"sources":["/Users/haoyu/Desktop/-HaoyuZhang--frontend/frontend/src/components/MoviesList.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'\nimport MovieDataService from '../services/movies'\nimport { Link } from 'react-router-dom'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\nimport Col from 'react-bootstrap/Col'\nimport Row from 'react-bootstrap/Row'\nimport Container from 'react-bootstrap/Container'\nimport Card from 'react-bootstrap/Card'\nimport './MoviesList.css'\n\nconst MoviesList = (props) => {\n\n  const [movies, setMovies] = useState([])\n  const [searchTitle, setSearchTitle] = useState(\"\")\n  const [searchRating, setSearchRating] = useState(\"\")\n  const [ratings, setRatings] = useState([\"All Ratings\"])\n  const [currentPage, setCurrentPage] = useState(0)\n  const [entriesPerPage, setEntriesPerPage] = useState(0)\n  const [currentSearchMode, setCurrentSearchMode] = useState(\"\")\n\n\n  const retrieveRatings = useCallback(() => {\n    MovieDataService.getRatings()\n      .then((response) => {\n        setRatings([\"All Ratings\"].concat(response.data))\n      })\n      .catch((error) => {\n        console.log(error)\n      })\n  }, [])\n\n  // Make sure to add the dependencies array as the second argument to useCallback\n\n\n  const retrieveMovies = useCallback(() => {\n    setCurrentSearchMode(\"\")\n\n    MovieDataService.getAll(currentPage)\n      .then((response) => {\n        setMovies(response.data.movies)\n        setCurrentPage(response.data.page)\n        setEntriesPerPage(response.data.entries_per_page)\n      })\n      .catch((error) => {\n        console.log(error)\n      })\n  }, [currentPage])\n\n  // Make sure to add the dependencies array as the second argument to useCallback\n  const find = useCallback((query, by) => {\n    MovieDataService.find(query, by, currentPage)\n      .then((response) => {\n        setMovies(response.data.movies)\n      })\n      .catch((error) => {\n        console.log(error)\n      })\n  }, [currentPage])\n\n  const findByTitle = useCallback(() => {\n    setCurrentSearchMode(\"findByTitle\")\n    find(searchTitle, \"title\")\n  }, [find, searchTitle])\n\n  const findByRating = useCallback(() => {\n    setCurrentSearchMode(\"findByRating\")\n    if (searchRating === \"All Ratings\") {\n      retrieveMovies()\n    } else {\n      find(searchRating, \"rated\")\n    }\n  }, [find, retrieveMovies, searchRating])\n\n  const retrieveNextPage = useCallback(() => {\n    if (currentSearchMode === \"findByTitle\") {\n      findByTitle()\n    } else if (currentSearchMode === \"findByRating\") {\n      findByRating()\n    } else {\n      retrieveMovies()\n    }\n  }, [currentSearchMode, findByTitle, findByRating, retrieveMovies])\n\n\n  // Use effect to carry out side effect functionality\n  useEffect(() => {\n    retrieveRatings()\n  }, [retrieveRatings])\n\n  useEffect(() => {\n    setCurrentPage(0)\n  }, [currentSearchMode])\n\n  // Retrieve the next page if currentPage value changes\n  useEffect(() => {\n    retrieveNextPage()\n  }, [currentPage, retrieveNextPage])\n\n  // Other functions that are not depended on by useEffect\n  const onChangeSearchTitle = (e) => {\n    const searchTitle = e.target.value\n    setSearchTitle(searchTitle)\n  }\n\n  const onChangeSearchRating = (e) => {\n    const searchRating = e.target.value\n    setSearchRating(searchRating)\n  }\n\n\n\n\n\n\n}\n\nexport default MoviesList\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}